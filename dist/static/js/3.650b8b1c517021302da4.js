webpackJsonp([3],{"6KmZ":function(e,t){},Qra9:function(e,t){},UXmT:function(e,t){},Y13R:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o={name:"add",props:["select","addList"],data:function(){return{Form:{province:"",city_list:[],login_module:[],head_module:[],beauty_module:[],task_module:[],foot_module:[],mine_module:[]},rules:{beauty_module:[{required:!0,message:"请至少选择一选项",trigger:"change"}],province:[{required:!0,message:"请至少选择一选项",trigger:"change"}],city_list:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],login_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],head_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],task_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],foot_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],mine_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}]},watch:""}},mounted:function(){this.watch=this.Form.resource},methods:{update:function(){var e=this.Form;this.Form.platform_type=this.platform_type;var t=this;this.baseFun().axios("post",this.baseUrl().entranceAdd,e,function(e){(e.message=!0)&&(t.$message({message:"添加成功！",type:"success"}),t.Form={province:"",city_list:[],login_module:[],head_module:[],beauty_module:[],task_module:[],foot_module:[],mine_module:[]},t.$emit("addCross","aaa"))})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.update()})},resetForm:function(e){this.$refs[e].resetFields()}},computed:{platform_type:function(){return"添加学生APP"===this.select?1:"添加教师APP"===this.select?2:void 0}},watch:{"Form.province":{handler:function(e,t){e!==t&&(this.Form.city_list=[])},deep:!0}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"Form",staticClass:"demo-ruleForm",attrs:{model:e.Form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"范围",prop:"province"}},[a("el-radio-group",{model:{value:e.Form.province,callback:function(t){e.$set(e.Form,"province",t)},expression:"Form.province"}},e._l(e.addList.range,function(t,o){return a("el-radio",{key:o,attrs:{label:t.province}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"city_list"}},[a("el-checkbox-group",{model:{value:e.Form.city_list,callback:function(t){e.$set(e.Form,"city_list",t)},expression:"Form.city_list"}},e._l(e.addList.range,function(t,o){return t.province===e.Form.province?a("div",{key:o},e._l(t.city_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.city,name:"type"}},[e._v(e._s(t.name))])})):e._e()}))],1),e._v(" "),a("div",[a("p",{staticStyle:{"margin-left":"59px"}},[e._v("入口")])]),e._v(" "),e._l(e.addList.module_map,function(t,o){return a("div",{key:o,staticClass:"co"},["注册"===t.type_name.slice(-2)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"login_module"}},[a("el-checkbox-group",{model:{value:e.Form.login_module,callback:function(t){e.$set(e.Form,"login_module",t)},expression:"Form.login_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"types"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"头部导航"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"head_module"}},[a("el-checkbox-group",{model:{value:e.Form.head_module,callback:function(t){e.$set(e.Form,"head_module",t)},expression:"Form.head_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"head_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"装扮空间"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"beauty_module"}},[a("el-checkbox-group",{model:{value:e.Form.beauty_module,callback:function(t){e.$set(e.Form,"beauty_module",t)},expression:"Form.beauty_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"beauty_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"课外拓展"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"task_module"}},[a("el-checkbox-group",{model:{value:e.Form.task_module,callback:function(t){e.$set(e.Form,"task_module",t)},expression:"Form.task_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"task_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"底部导航"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"foot_module"}},[a("el-checkbox-group",{model:{value:e.Form.foot_module,callback:function(t){e.$set(e.Form,"foot_module",t)},expression:"Form.foot_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"foot_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"我"===t.type_name.slice(-1)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"mine_module"}},[a("el-checkbox-group",{model:{value:e.Form.mine_module,callback:function(t){e.$set(e.Form,"mine_module",t)},expression:"Form.mine_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"mine_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e()])}),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("Form")}}},[e._v("立即创建")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("Form")}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-form",{ref:"Form",staticClass:"demo-ruleForm",attrs:{model:e.Form,rules:e.rules,"label-width":"100px"}},[a("el-form-item",{attrs:{label:"范围",prop:"province"}},[a("el-radio-group",{model:{value:e.Form.province,callback:function(t){e.$set(e.Form,"province",t)},expression:"Form.province"}},e._l(e.addList.range,function(t,o){return a("el-radio",{key:o,attrs:{label:t.province},on:{change:e.ProvinceChange}},[e._v(e._s(t.name))])}))],1),e._v(" "),a("el-form-item",{attrs:{label:"",prop:"city_list"}},[a("el-checkbox-group",{model:{value:e.Form.city_list,callback:function(t){e.$set(e.Form,"city_list",t)},expression:"Form.city_list"}},e._l(e.addList.range,function(t,o){return t.province===e.Form.province?a("div",{key:o},e._l(t.city_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.city,name:"type"}},[e._v(e._s(t.name))])})):e._e()}))],1),e._v(" "),a("div",[a("p",{staticStyle:{"margin-left":"59px"}},[e._v("入口")])]),e._v(" "),e._l(e.addList.module_map,function(t,o){return a("div",{key:o,staticClass:"co"},["注册"===t.type_name.slice(-2)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"login_module"}},[a("el-checkbox-group",{model:{value:e.Form.login_module,callback:function(t){e.$set(e.Form,"login_module",t)},expression:"Form.login_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"types"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"头部导航"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"head_module"}},[a("el-checkbox-group",{model:{value:e.Form.head_module,callback:function(t){e.$set(e.Form,"head_module",t)},expression:"Form.head_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"head_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"装扮空间"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"beauty_module"}},[a("el-checkbox-group",{model:{value:e.Form.beauty_module,callback:function(t){e.$set(e.Form,"beauty_module",t)},expression:"Form.beauty_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"beauty_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"课外拓展"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"task_module"}},[a("el-checkbox-group",{model:{value:e.Form.task_module,callback:function(t){e.$set(e.Form,"task_module",t)},expression:"Form.task_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"task_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"底部导航"===t.type_name.slice(-4)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"foot_module"}},[a("el-checkbox-group",{model:{value:e.Form.foot_module,callback:function(t){e.$set(e.Form,"foot_module",t)},expression:"Form.foot_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"foot_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e(),e._v(" "),"我"===t.type_name.slice(-1)?a("div",[a("p",[e._v(e._s(t.type_name))]),e._v(" "),a("div",[a("el-form-item",{attrs:{prop:"mine_module"}},[a("el-checkbox-group",{model:{value:e.Form.mine_module,callback:function(t){e.$set(e.Form,"mine_module",t)},expression:"Form.mine_module"}},e._l(t.code_map,function(t,o){return a("el-checkbox",{key:o,attrs:{label:t.id,name:"mine_module"}},[e._v(e._s(t.meaning))])}))],1)],1)]):e._e()])}),e._v(" "),a("div",[a("el-button",{staticStyle:{"margin-left":"80px"},attrs:{type:"primary"},on:{click:function(t){e.submitForm("Form")}}},[e._v("立即修改")]),e._v(" "),a("el-button",{on:{click:function(t){e.resetForm("Form")}}},[e._v("重置")])],1)],2)],1)},staticRenderFns:[]};var r={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{offset:1,span:2}},[a("b",[e._v("范围")])]),e._v(" "),a("el-col",{attrs:{span:18}},[a("p",{staticStyle:{}},[a("b",[e._v(e._s(e.viewData.province_name))])])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"4px"}},[a("el-col",{staticStyle:{"margin-left":"105px"},attrs:{span:18}},e._l(e.viewData.city_name_list,function(t){return a("span",{staticStyle:{"margin-left":"6px"}},[e._v(e._s(t))])}))],1),e._v(" "),a("el-row",{staticStyle:{position:"relative",top:"25px"}},[a("el-col",{attrs:{offset:1,span:2}},[a("b",[e._v("入口")])])],1),e._v(" "),e._l(e.viewData.module_name_list,function(t){return a("div",[a("el-row",{staticStyle:{"margin-top":"15px"}},[a("el-col",{attrs:{offset:3,span:18}},[a("p",[a("b",[e._v(e._s(t.type_name))])])])],1),e._v(" "),a("el-row",{staticStyle:{"margin-top":"2px","margin-left":"-13px"}},[a("el-col",{attrs:{offset:3,span:18}},e._l(t.code_name_list,function(t){return a("span",{staticStyle:{"margin-left":"10px"}},[e._v(e._s(t))])}))],1)],1)})],2)},staticRenderFns:[]};var l={name:"entrance",components:{addApp:a("VU/8")(o,i,!1,function(e){a("Qra9")},"data-v-51dcdda8",null).exports,EditApp:a("VU/8")({name:"EditAPP",props:["select","addList","Form"],data:function(){return{rules:{beauty_module:[{required:!0,message:"请至少选择一选项",trigger:"change"}],province:[{required:!0,message:"请至少选择一选项",trigger:"change"}],city_list:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],login_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],head_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],task_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],foot_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}],mine_module:[{type:"array",required:!0,message:"请至少选择一选项",trigger:"change"}]},watch:""}},mounted:function(){this.watch=this.Form.resource},methods:{ProvinceChange:function(){this.Form.city_list=[]},update:function(){var e=this.Form,t=this;"添加学生APP"===this.select&&(e.platform_type=1),"添加教师APP"===this.select&&(e.platform_type=2),this.Form.platform_type=this.platform_type,this.baseFun().axios("post",this.baseUrl().entranceUpdate,e,function(e){(e.data.success=!0)&&(t.$message({message:"修改成功！",type:"success"}),t.$emit("EditCross","aaa"))})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return!1;t.update()})},resetForm:function(e){this.$refs[e].resetFields()}},computed:{platform_type:function(){return"添加学生APP"===this.select?1:"添加教师APP"===this.select?2:void 0}},watch:{}},n,!1,function(e){a("6KmZ")},"data-v-365019a2",null).exports,ViewApp:a("VU/8")({name:"ViewApp",props:["viewData"],data:function(){return{}},methods:{},mounted:function(){}},r,!1,function(e){a("x9Id")},"data-v-369f03d0",null).exports},data:function(){return{currentPage:1,pagesize:10,dialogVisible:!1,dialogVisible2:!1,dialogVisible3:!1,viewData:{},tableData:[],dialog:{name:"添加学生APP"},ViewDialog:{name:""},addList:{},Form:{province:"",city_list:[],login_module:[],head_module:[],beauty_module:[],task_module:[],foot_module:[],mine_module:[]}}},mounted:function(){this.getData()},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},EditCross:function(){this.dialogVisible2=!1,this.getData()},addCross:function(){this.getData(),console.log(111111),this.dialogVisible=!1},childByValue:function(){this.getData()},handleView:function(e,t){var a=this;this.dialogVisible3=!0,this.baseFun().axios("post",this.baseUrl().entranceView,{config_id:t.id},function(e){a.viewData=e.data.config_map})},insertState:function(e,t){},handleEdit:function(e,t){var a;switch(this.Form.city_list=[],this.Form.login_module=[],this.Form.head_module=[],this.Form.beauty_module=[],this.Form.task_module=[],this.Form.foot_module=[],this.Form.mine_module=[],t.type){case"学生APP":a=1;break;case"教师APP":a=2}this.dialogVisible2=!0;var o=this;this.baseFun().axiosGet(this.baseUrl().entranceUpdate+"?config_id="+t.id+"&platform_type="+a,function(e){o.addList=e.data,o.insertState(e,o)}),this.baseFun().axios("post",this.baseUrl().entranceSelectState,{config_id:t.id,platform_type:a},function(e){o.Form=e.data.config_map,o.Form.config_id=t.id})},handleDelete:function(e,t){var a=this,o=this;this.$confirm("此操作将永久删除该文件, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.baseFun().axios("post",a.baseUrl().entranceDelete,{config_id:t.id},function(e){!0===e.data.success?(o.$message({message:"删除成功！",type:"success"}),1===o.tableData.slice((o.currentPage-1)*o.pagesize,o.currentPage*o.pagesize).length&&o.currentPage--,o.getData()):o.$message({message:"删除失败："+e.data.msg,type:"warning"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleClose2:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleClose3:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},getData:function(){var e=this;this.baseFun().axios("get",this.baseUrl().entrance,"",function(t){t.data.table.forEach(function(e){switch(e.type){case 1:e.type="学生APP";break;case 2:e.type="教师APP";break;case 3:e.type="学生web";break;case 4:e.type="教师web"}}),e.tableData=t.data.table})},addClick1:function(){var e=this;this.dialog.name="添加学生APP",this.dialogVisible=!0,this.$axios.get(this.baseUrl().entranceAdd+"?platform_type=1").then(function(t){e.addList=t.data}).catch(function(e){console.log(e)}),console.log(1)},addClick2:function(){this.dialog.name="添加教师APP";var e=this;this.$axios.get(this.baseUrl().entranceAdd+"?platform_type=2").then(function(t){e.addList=t.data}).catch(function(e){console.log(e)}),this.dialogVisible=!0}}},s={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("div",{staticStyle:{"margin-bottom":"20px"}},[a("el-button",{attrs:{type:"primary"},on:{click:e.addClick1}},[e._v("添加学生APP")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addClick2}},[e._v("添加教师APP")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("添加学生web")]),e._v(" "),a("el-button",{attrs:{type:"primary"}},[e._v("添加教师web")])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialog.name,visible:e.dialogVisible,width:"65%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("div",[a("addApp",{attrs:{addList:e.addList,select:e.dialog.name},on:{addCross:e.addCross}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.dialog.name,visible:e.dialogVisible2,width:"65%","before-close":e.handleClose2},on:{"update:visible":function(t){e.dialogVisible2=t}}},[a("div",[a("EditApp",{attrs:{Form:e.Form,addList:e.addList,select:e.dialog.name},on:{EditCross:function(t){e.EditCross()}}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"})])],1),e._v(" "),a("div",[a("el-dialog",{attrs:{title:e.viewData.platform_name,visible:e.dialogVisible3,width:"65%","before-close":e.handleClose3},on:{"update:visible":function(t){e.dialogVisible3=t}}},[a("div",[a("ViewApp",{attrs:{viewData:e.viewData}})],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible3=!1}}},[e._v("关 闭")])],1)])],1),e._v(" "),a("div",[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"","default-sort":{prop:"parent_name",order:"descending"}}},[a("el-table-column",{attrs:{align:"center",prop:"type",label:"平台",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"range",width:"500",label:"范围"}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"add_date",label:"添加时间",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"240"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleEdit(t.$index,t.row)}}},[e._v("修改")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleView(t.$index,t.row)}}},[e._v("查看")])]}}])})],1),e._v(" "),a("div",{staticStyle:{position:"relative"}},[a("el-pagination",{staticClass:"page_center",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1)])},staticRenderFns:[]};var c=a("VU/8")(l,s,!1,function(e){a("UXmT")},"data-v-0b5848b8",null);t.default=c.exports},x9Id:function(e,t){}});