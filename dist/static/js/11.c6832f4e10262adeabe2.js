webpackJsonp([11],{"4bMZ":function(e,t){},TjJL:function(e,t){},g9bN:function(e,t,a){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var s={name:"EnglishStage",props:["stageData"],data:function(){return{dialogVisibleAdd:!1,dialogVisibleEdit:!1,dialogVisibleAddStage:!1,dialogVisibleEditStage:!1,dialogVisibleStageContent:!1,addChaData:{book_id:"",name:""},editChaData:{chapter_id:"",name:""},addStageData:{book_id:"",chapter_id:"",section_type:"",hard_mode:"",name:""},editStageData:{section_id:"",book_id:"",chapter_id:"",name:"",section_type:"",hard_mode:""},editStageContentData:{},StageText:[]}},methods:{chaMoveUP:function(e){var t=this;this.baseFun().axios("post",this.baseUrl().ChaMove_eng,{book_id:this.stageData.book_id,chapter_id:e.chapter_id,sequence:e.sequence,action:"up"},function(e){e.data.success?(t.$message({message:"移动成功！",type:"success"}),t.$emit("refresh","aaa")):t.$message({message:e.data.msg,type:"warning"})})},chaMoveDown:function(e){var t=this;this.baseFun().axios("post",this.baseUrl().ChaMove_eng,{book_id:this.stageData.book_id,chapter_id:e.chapter_id,sequence:e.sequence,action:"down"},function(e){e.data.success?(t.$message({message:"移动成功！",type:"success"}),t.$emit("refresh","aaa")):t.$message({message:e.data.msg,type:"warning"})})},chatoggle:function(e){e.toggle=!e.toggle},chaDelete:function(e){var t=this;console.log(e.chapter_id);var a=this;this.$confirm("此操作将永久删除该目录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.baseFun().axios("post",t.baseUrl().deleteCha_eng,{chapter_id:e.chapter_id},function(e){!0===e.data.success?(a.$message({message:"删除成功！",type:"success"}),a.$emit("refresh","aaa")):a.$message({message:e.data.msg,type:"warning"})})}).catch(function(){t.$message({type:"info",message:"已取消删除"})})},chaOn:function(e){var t=this;console.log(e);var a=this;2===e.status?this.baseFun().axios("post",this.baseUrl().statusCha_eng,{status:1,chapter_id:e.chapter_id},function(e){!0===e.data.success?(a.$message({message:e.data.msg,type:"success"}),a.$emit("refresh","aaa")):a.$message({message:e.data.msg,type:"warning"})}):this.$confirm("此操作将禁用关卡, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){t.baseFun().axios("post",t.baseUrl().statusCha_eng,{status:2,chapter_id:e.chapter_id},function(e){!0===e.data.success?(a.$message({message:e.data.msg,type:"success"}),a.$emit("refresh","aaa")):a.$message({message:e.data.msg,type:"warning"})})}).catch(function(){t.$message({type:"info",message:"已取消操作"})})},ChaAdd:function(){if(this.addChaData.book_id=this.stageData.book_id,console.log(this.addChaData),""!==this.addChaData.name){var e=this;this.baseFun().axios("post",this.baseUrl().chaAdd_eng,this.addChaData,function(t){console.log(t),t.data.success?(e.$message({message:"添加成功！",type:"success"}),e.addChaData.name="",e.$emit("refresh","aaa"),e.dialogVisibleAdd=!1):e.$message({message:t.data.msg,type:"warning"})})}},editChaClick:function(e){console.log(e),this.dialogVisibleEdit=!0,this.editChaData.chapter_id=e.chapter_id,this.editChaData.name=e.name},editCha:function(){if(""!==this.editChaData.name){var e=this;this.baseFun().axios("post",this.baseUrl().editCha_eng,this.editChaData,function(t){console.log(t),t.data.success?(e.$message({message:"修改成功！",type:"success"}),e.editChaData.name="",e.editChaData.chapter_id="",e.$emit("refresh","aaa"),e.dialogVisibleEdit=!1):e.$message({message:t.data.msg,type:"warning"})})}},stageMoveUp:function(e,t){console.log(e.sequence);var a=this;this.baseFun().axios("post",this.baseUrl().stageMove_eng,{section_id:e.section_id,book_id:this.stageData.book_id,chapter_id:t.chapter_id,sequence:e.sequence,action:"up"},function(e){e.data.success?(a.$message({message:"移动成功！",type:"success"}),a.$emit("refresh","aaa")):a.$message({message:e.data.msg,type:"warning"})})},stageMoveDown:function(e,t){var a=this;this.baseFun().axios("post",this.baseUrl().stageMove_eng,{section_id:e.section_id,book_id:this.stageData.book_id,chapter_id:t.chapter_id,sequence:e.sequence,action:"down"},function(e){e.data.success?(a.$message({message:"移动成功！",type:"success"}),a.$emit("refresh","aaa")):a.$message({message:e.data.msg,type:"warning"})})},stageContentClick:function(e,t){var a=this;console.log(e,t),this.baseFun().axiosGet(this.baseUrl().stageContentEdit_eng+"?section_id="+e.section_id,function(e){a.editStageContentData=e.data.section_map,e.data.section_map.text.forEach(function(e,t){a.StageText.push({name:e})}),console.log(a.StageText)}),this.dialogVisibleStageContent=!0},editStage:function(){var e=this;this.baseFun().axios("post",this.baseUrl().stageEdit_eng,this.editStageData,function(t){t.data.success?(e.$message({message:"修改成功！",type:"success"}),e.$emit("refresh","aaa"),e.dialogVisibleEditStage=!1):e.$message({message:t.data.msg,type:"warning"})})},stageEditClick:function(e,t){console.log(e),console.log(t),this.editStageData.section_id=e.section_id,this.editStageData.book_id=this.stageData.book_id,this.editStageData.hard_mode=e.hard_mode.toString(),this.editStageData.name=e.name,this.editStageData.chapter_id=t.chapter_id,this.editStageData.section_type=e.type,"单词跟读"===e.type&&(this.editStageData.section_type="1"),"课文跟读"===e.type&&(this.editStageData.section_type="2"),"同步习题"===e.type&&(this.editStageData.section_type="3"),this.dialogVisibleEditStage=!0},addStageContent:function(){this.StageText.push({name:""})},deleteStageContent:function(e){this.StageText.splice(e,1)},updataStangeContent:function(){var e=this,t=[];this.StageText.forEach(function(e,a){t[a]=e.name}),this.editStageContentData.text=t,console.log(this.editStageContentData),this.baseFun().axios("post",this.baseUrl().stageContentEdit_eng,this.editStageContentData,function(t){t.data.success?(e.$message({message:"更新成功！",type:"success"}),e.StageText=[],e.$emit("refresh","aaa"),e.dialogVisibleStageContent=!1):e.$message({message:t.data.msg,type:"warning"})})},stageDelete:function(e,t){var a=this;console.log(e),console.log(t);var s=this;this.$confirm("此操作将永久删除该目录, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.baseFun().axios("post",a.baseUrl().stageDelete_eng,{chapter_id:t.chapter_id,section_id:e.section_id},function(e){!0===e.data.success?(s.$message({message:"删除成功！",type:"success"}),s.$emit("refresh","aaa")):s.$message({message:e.data.msg,type:"warning"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},stageAddClick:function(e){this.dialogVisibleAddStage=!0,this.addStageData.chapter_id=e.chapter_id,console.log(e)},stageAdd:function(){if(""!==this.addStageData.name){var e=this;this.addStageData.book_id=this.stageData.book_id,this.baseFun().axios("post",this.baseUrl().stageAdd_eng,this.addStageData,function(t){console.log(t),t.data.success?(e.$message({message:"添加成功！",type:"success"}),e.addStageData.name="",e.addStageData.section_type="",e.addStageData.hard_mode="",e.$emit("refresh","aaa"),e.dialogVisibleAddStage=!1):e.$message({message:t.data.msg,type:"warning"})})}},handleCloseAdd:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleCloseEdit:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleCloseAddStage:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleCloseEditStage:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleCloseStageContent:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})}},watch:{dialogVisibleStageContent:function(e,t){!1===e&&(console.log("qingli"),this.StageText.length=0)}}},i={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleAdd=!0}}},[e._v("添加一级目录")]),e._v(" "),a("div",e._l(e.stageData.chapter_list,function(t){return a("div",[a("div",{staticClass:"cha"},[a("span",[e._v("----------------------------------------------------------------------------------------------------------------------------------------------------------------------------------")]),e._v(" "),a("p",[e._v(e._s(t.name))]),e._v(" "),a("div",{staticClass:"operate"},[a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.stageAddClick(t)}}},[e._v("添加关卡")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.editChaClick(t)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.chaDelete(t)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.chaOn(t)}}},[e._v(e._s(2===t.status?"启用":"禁用"))]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.chaMoveUP(t)}}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{type:"text",size:"mini"},on:{click:function(a){e.chaMoveDown(t)}}},[e._v("下移")]),e._v(" "),a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.chatoggle(t)}}},[e._v(e._s(t.toggle?"收起":"展开"))])],1)]),e._v(" "),a("transition",{attrs:{name:"fade"}},[a("div",{directives:[{name:"show",rawName:"v-show",value:t.toggle,expression:"item.toggle"}]},e._l(t.section_list,function(s){return a("div",{staticClass:"cha cilidren_"},[a("span",[e._v("-------------------------------------------------------------------------------------------------------------------------------------------------------------------------")]),e._v(" "),a("p",[e._v(e._s(s.name))]),e._v(" "),a("div",{staticClass:"operate",staticStyle:{"padding-right":"170px"}},[1===s.hard_mode?a("span",[e._v("高")]):e._e(),e._v(" "),a("el-button",{attrs:{type:"text",disabled:1===t.status,size:"mini"},on:{click:function(a){e.stageContentClick(s,t)}}},[e._v(e._s(s.type)+"("+e._s(s.content_length)+")")]),e._v(" "),a("el-button",{attrs:{type:"text",disabled:1===t.status,size:"mini"},on:{click:function(a){e.stageEditClick(s,t)}}},[e._v("编辑")]),e._v(" "),a("el-button",{attrs:{type:"text",disabled:1===t.status,size:"mini"},on:{click:function(a){e.stageDelete(s,t)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{type:"text",disabled:1===t.status,size:"mini"},on:{click:function(a){e.stageMoveUp(s,t)}}},[e._v("上移")]),e._v(" "),a("el-button",{attrs:{type:"text",disabled:1===t.status,size:"mini"},on:{click:function(a){e.stageMoveDown(s,t)}}},[e._v("下移")])],1)])}))])],1)})),e._v(" "),a("el-dialog",{attrs:{title:"添加目录",visible:e.dialogVisibleAdd,width:"35%","before-close":e.handleCloseAdd,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisibleAdd=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.addChaData,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.addChaData.name,callback:function(t){e.$set(e.addChaData,"name",t)},expression:"addChaData.name"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.ChaAdd}},[e._v("添 加")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleAdd=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑目录",visible:e.dialogVisibleEdit,width:"35%","before-close":e.handleCloseEdit,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisibleEdit=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.editChaData,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.editChaData.name,callback:function(t){e.$set(e.editChaData,"name",t)},expression:"editChaData.name"}})],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editCha}},[e._v("确 认")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleEdit=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加关卡",visible:e.dialogVisibleAddStage,width:"35%","before-close":e.handleCloseAddStage,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisibleAddStage=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.addStageData,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.addStageData.name,callback:function(t){e.$set(e.addStageData,"name",t)},expression:"addStageData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"类型"}},[a("el-radio-group",{model:{value:e.addStageData.section_type,callback:function(t){e.$set(e.addStageData,"section_type",t)},expression:"addStageData.section_type"}},[a("el-radio",{attrs:{label:"1"}},[e._v("单词跟读")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("课文跟读")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("同步习题")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"等级"}},[a("el-radio-group",{model:{value:e.addStageData.hard_mode,callback:function(t){e.$set(e.addStageData,"hard_mode",t)},expression:"addStageData.hard_mode"}},[a("el-radio",{attrs:{label:0}},[e._v("普通关卡")]),e._v(" "),a("el-radio",{attrs:{label:1}},[e._v("高级关卡")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.stageAdd}},[e._v("添 加")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleAddStage=!1}}},[e._v("取 消")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑关卡",visible:e.dialogVisibleEditStage,width:"35%","before-close":e.handleCloseEditStage,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisibleEditStage=t}}},[a("el-form",{staticClass:"demo-ruleForm",attrs:{model:e.editStageData,"label-width":"50px"}},[a("el-form-item",{attrs:{label:"名称",prop:"name"}},[a("el-input",{model:{value:e.editStageData.name,callback:function(t){e.$set(e.editStageData,"name",t)},expression:"editStageData.name"}})],1),e._v(" "),a("el-form-item",{attrs:{label:"等级"}},[a("el-radio-group",{model:{value:e.editStageData.hard_mode,callback:function(t){e.$set(e.editStageData,"hard_mode",t)},expression:"editStageData.hard_mode"}},[a("el-radio",{attrs:{label:"0"}},[e._v("普通关卡")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("高级关卡")])],1)],1)],1),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.editStage}},[e._v("确 认")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleEditStage=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"编辑关卡内容",visible:e.dialogVisibleStageContent,width:"30%","before-close":e.handleCloseStageContent,"append-to-body":""},on:{"update:visible":function(t){e.dialogVisibleStageContent=t}}},[e._l(e.StageText,function(t,s){return a("div",{staticStyle:{"margin-top":"3px"}},[a("el-input",{staticStyle:{width:"60%","margin-bottom":"3px"},model:{value:t.name,callback:function(a){e.$set(t,"name",a)},expression:"item.name"}}),e._v(" "),a("el-button",{on:{click:function(t){e.deleteStageContent(s)}}},[e._v("删除")])],1)}),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:e.addStageContent}},[e._v("新 增")]),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:e.updataStangeContent}},[e._v("提 交")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleStageContent=!1}}},[e._v("取 消")])],1)],2)],1)},staticRenderFns:[]};var o={name:"English",components:{EnglishStage:a("VU/8")(s,i,!1,function(e){a("4bMZ")},"data-v-1a123344",null).exports},data:function(){return{currentPage:1,pagesize:10,tableDataStatus:"",rules:{press_id:[{required:!0,message:"请选择版本",trigger:"change"}],version_id:[{required:!0,message:"请选择版本",trigger:"change"}],grade_id:[{required:!0,message:"请选择年级",trigger:"change"}],volume:[{required:!0,message:"请选择阶段",trigger:"change"}],status:[{required:!0,message:"请选择状态",trigger:"change"}]},queryData:{volume:"",status:"",press_id:"",version_id:"",grade_id:"",subject_id:9},book_press_version:[],tableData:[],addData:{subject_id:9,book_id:"",press_id:"",version_id:"",grade_id:"",volume:""},ADD:[],dialogVisible:!1,dialogVisibleEdit:!1,dialogVisibleStage:!1,stageTitle:"北师大--新版--一年级--上册",stageData:{},bookRequestData:{subject_id:9,book_id:""}}},mounted:function(){var e=this;this.getData(),this.baseFun().axios("post",this.baseUrl().book_press_version,{subject_id:9},function(t){e.book_press_version=t.data.table})},methods:{handleSizeChange:function(e){this.pagesize=e},handleCurrentChange:function(e){this.currentPage=e},refresh:function(){var e=this;this.baseFun().axios("post",this.baseUrl().bookDetail,this.bookRequestData,function(t){e.stageData=t.data.book_map})},freshData:function(){"all"===this.tableDataStatus&&(console.log("请求所有数据"),this.getData()),"query"===this.tableDataStatus&&(console.log("请求搜索数据"),this.bookQuery())},getData:function(){var e=this;this.baseFun().axiosGet(this.baseUrl().book_home+"?subject_id=9",function(t){e.tableData=t.data.table,e.tableDataStatus="all"})},bookQuery:function(){var e=this;this.baseFun().axios("post",this.baseUrl().book_query,this.queryData,function(t){console.log(t.data),t.data.success&&(e.tableData=t.data.table,e.tableDataStatus="query",e.currentPage=1)})},addBook:function(){var e=this;this.baseFun().axios("post",this.baseUrl().addBook,{book_list:this.ADD},function(t){t.data.success?(e.$message({message:"添加成功！",type:"success"}),e.dialogVisible=!1):e.$message({message:"添加失败"+t.data.msg,type:"warning"})})},addQueryBook:function(){console.log(this.addData);var e=this;this.baseFun().axios("post",this.baseUrl().addQueryData,this.addData,function(t){console.log(t.data),t.data.success&&(e.ADD=t.data.table)})},handleStatus:function(e,t){var a=this;console.log(t);var s,i=this;t.book_id;"启用"===t.status?(s=2,this.$confirm("此操作将禁用关卡, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.baseFun().axios("post",a.baseUrl().book_home_status,{subject_id:9,book_id:t.book_id,status:s},function(e){!0===e.data.success?(i.$message({message:"状态变更成功",type:"success"}),i.freshData()):i.$message({message:e.data.msg,type:"warning"})})}).catch(function(){a.$message({type:"info",message:"已取消操作"})})):(s=1,this.baseFun().axios("post",this.baseUrl().book_home_status,{subject_id:9,book_id:t.book_id,status:s},function(e){!0===e.data.success?(i.$message({message:"状态变更成功",type:"success"}),i.freshData()):i.$message({message:e.data.msg,type:"warning"})})),this.dialogVisibleEdit=!0},handleDelete:function(e,t){var a=this;console.log(t);var s=this;this.$confirm("此操作将永久删除该教材, 是否继续?","提示",{confirmButtonText:"确定",cancelButtonText:"取消",type:"warning"}).then(function(){a.baseFun().axios("post",a.baseUrl().book_delete,{subject_id:9,book_id:t.book_id},function(e){!0===e.data.success?(s.$message({message:"删除成功！",type:"success"}),1===s.tableData.slice((s.currentPage-1)*s.pagesize,s.currentPage*s.pagesize).length&&s.currentPage--,s.freshData()):s.$message({message:e.data.msg,type:"warning"})})}).catch(function(){a.$message({type:"info",message:"已取消删除"})})},handleStage:function(e,t){console.log(t),this.bookRequestData.book_id=t.book_id,this.stageTitle=t.press_name+"--"+t.version_name+"--"+t.grade+"--"+t.volume,this.stageData={},this.refresh(),this.dialogVisibleStage=!0},handleClose:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleCloseEdit:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},handleCloseStage:function(e){this.$confirm("确认关闭？").then(function(t){e()}).catch(function(e){})},submitForm:function(e){var t=this;this.$refs[e].validate(function(e){if(!e)return console.log("error submit!!"),!1;t.addQueryBook()})}},computed:{tableLength:function(){return this.tableData.length}},watch:{"addData.press_id":{handler:function(e,t){e!==t&&(this.addData.version_id="")},deep:!0},"queryData.press_id":{handler:function(e,t){e!==t&&(this.queryData.version_id="")},deep:!0},dialogVisible:{handler:function(e,t){!1===e&&(this.ADD=[],this.addData.press_id="",this.addData.version_id="",this.addData.grade_id="",this.addData.volume="",this.addData.status="")},deep:!0}}},n={render:function(){var e=this,t=e.$createElement,a=e._self._c||t;return a("div",[a("el-row",[a("el-col",{attrs:{span:12}},[a("el-form",{ref:"queryData",attrs:{model:e.queryData,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"教材："}},[a("el-select",{attrs:{placeholder:"请选择出版社"},model:{value:e.queryData.press_id,callback:function(t){e.$set(e.queryData,"press_id",t)},expression:"queryData.press_id"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(e.book_press_version,function(e,t){return a("el-option",{key:t,attrs:{label:e.press_name,value:e.press_id}})})],2),e._v(" "),a("el-select",{attrs:{placeholder:"请选择版本"},model:{value:e.queryData.version_id,callback:function(t){e.$set(e.queryData,"version_id",t)},expression:"queryData.version_id"}},e._l(e.book_press_version,function(t){return t.press_id==e.queryData.press_id?a("div",[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(t.version_list,function(e,t){return a("el-option",{key:t,attrs:{label:e.version_name,value:e.version_id}})})],2):e._e()}))],1),e._v(" "),a("el-form-item",{attrs:{label:"年级："}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.queryData.grade_id,callback:function(t){e.$set(e.queryData,"grade_id",t)},expression:"queryData.grade_id"}},[a("el-option",{attrs:{label:"全部",value:"0"}}),e._v(" "),e._l(9,function(e,t){return a("el-option",{key:t,attrs:{label:e+"年级",value:e}})})],2)],1),e._v(" "),a("el-form-item",{attrs:{label:"阶段："}},[a("el-radio-group",{model:{value:e.queryData.volume,callback:function(t){e.$set(e.queryData,"volume",t)},expression:"queryData.volume"}},[a("el-radio",{attrs:{label:"0"}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("上册")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("下册")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("全册")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态："}},[a("el-radio-group",{model:{value:e.queryData.status,callback:function(t){e.$set(e.queryData,"status",t)},expression:"queryData.status"}},[a("el-radio",{attrs:{label:"0"}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("未启用")])],1)],1)],1)],1),e._v(" "),a("el-col",{attrs:{offset:8,span:2}},[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:function(t){e.dialogVisible=!0}}},[e._v("添加教材")])],1)],1),e._v(" "),a("el-row",[a("el-col",[a("el-button",{staticStyle:{"margin-left":"20px"},attrs:{type:"primary",icon:"el-icon-search"},on:{click:e.bookQuery}},[e._v("搜索")]),e._v(" "),a("span",{staticStyle:{color:"#666666","margin-left":"20px","font-size":"15px"}},[e._v("共"+e._s(e.tableLength)+"条结果")])],1)],1),e._v(" "),a("div",{staticStyle:{"margin-top":"30px"}},[a("el-table",{staticStyle:{width:"100%"},attrs:{data:e.tableData.slice((e.currentPage-1)*e.pagesize,e.currentPage*e.pagesize),border:"","default-sort":{prop:"parent_name",order:"descending"}}},[a("el-table-column",{attrs:{prop:"press_name",label:"出版社",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{align:"center",prop:"version_name",label:"版本",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"book_name",label:"名称",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"grade",label:"年级",align:"center",sortable:""}}),e._v(" "),a("el-table-column",{attrs:{prop:"volume",label:"阶段",sortable:"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{prop:"status",label:"状态",sortable:"",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{sortable:"",prop:"add_date",label:"添加时间",align:"center"}}),e._v(" "),a("el-table-column",{attrs:{label:"操作",align:"center",width:"250",prop:"status"},scopedSlots:e._u([{key:"default",fn:function(t){return[a("el-button",{attrs:{size:"mini"},on:{click:function(a){e.handleStatus(t.$index,t.row)}}},[e._v(e._s("启用"===t.row.status?"禁用":"启用"))]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"danger"},on:{click:function(a){e.handleDelete(t.$index,t.row)}}},[e._v("删除")]),e._v(" "),a("el-button",{attrs:{size:"mini",type:"primary"},on:{click:function(a){e.handleStage(t.$index,t.row)}}},[e._v("关卡管理")])]}}])})],1),e._v(" "),a("div",{staticStyle:{position:"relative"}},[a("el-pagination",{staticClass:"page_center",attrs:{"current-page":e.currentPage,"page-sizes":[10,20,50,100],"page-size":e.pagesize,layout:"total, sizes, prev, pager, next, jumper",total:e.tableData.length},on:{"size-change":e.handleSizeChange,"current-change":e.handleCurrentChange}})],1)],1),e._v(" "),a("el-dialog",{attrs:{title:"添加教材",visible:e.dialogVisible,width:"40%","before-close":e.handleClose},on:{"update:visible":function(t){e.dialogVisible=t}}},[a("el-form",{ref:"addData",staticClass:"demo-ruleForm",attrs:{model:e.addData,rules:e.rules,"label-width":"80px"}},[a("el-form-item",{attrs:{label:"教材：",prop:"press_id"}},[a("el-select",{attrs:{placeholder:"请选择出版社"},model:{value:e.addData.press_id,callback:function(t){e.$set(e.addData,"press_id",t)},expression:"addData.press_id"}},e._l(e.book_press_version,function(e,t){return a("el-option",{key:t,attrs:{label:e.press_name,value:e.press_id}})})),e._v(" "),a("el-select",{attrs:{placeholder:"请选择版本"},model:{value:e.addData.version_id,callback:function(t){e.$set(e.addData,"version_id",t)},expression:"addData.version_id"}},e._l(e.book_press_version,function(t){return t.press_id==e.addData.press_id?a("div",e._l(t.version_list,function(e,t){return a("el-option",{key:t,attrs:{label:e.version_name,value:e.version_id}})})):e._e()}))],1),e._v(" "),a("el-form-item",{attrs:{label:"年级：",prop:"grade_id"}},[a("el-select",{attrs:{placeholder:"请选择年级"},model:{value:e.addData.grade_id,callback:function(t){e.$set(e.addData,"grade_id",t)},expression:"addData.grade_id"}},e._l(9,function(e,t){return a("el-option",{key:t,attrs:{label:e+"年级",value:e}})}))],1),e._v(" "),a("el-form-item",{attrs:{label:"阶段：",prop:"volume"}},[a("el-radio-group",{model:{value:e.addData.volume,callback:function(t){e.$set(e.addData,"volume",t)},expression:"addData.volume"}},[a("el-radio",{attrs:{label:"0"}},[e._v("全部")]),e._v(" "),a("el-radio",{attrs:{label:"1"}},[e._v("上册")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("下册")]),e._v(" "),a("el-radio",{attrs:{label:"3"}},[e._v("全册")])],1)],1),e._v(" "),a("el-form-item",{attrs:{label:"状态：",prop:"status"}},[a("el-radio-group",{model:{value:e.addData.status,callback:function(t){e.$set(e.addData,"status",t)},expression:"addData.status"}},[a("el-radio",{attrs:{label:"1"}},[e._v("启用")]),e._v(" "),a("el-radio",{attrs:{label:"2"}},[e._v("未启用")])],1)],1),e._v(" "),a("el-button",{on:{click:function(t){e.submitForm("addData")}}},[e._v("查询教材")]),e._v(" "),0===e.ADD.length?a("p",{staticStyle:{"text-align":"center"}},[e._v("暂无教材可添加！")]):e._e(),e._v(" "),e._l(e.ADD,function(t){return a("p",{staticStyle:{"text-align":"center"}},[e._v(e._s(t.press_name)+"--"+e._s(t.version_name)+"--"+e._s(t.grade_id)+"年级--"+e._s(t.volume_val))])})],2),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{disabled:0===e.ADD.length},on:{click:e.addBook}},[e._v("添加教材")]),e._v(" "),a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisible=!1}}},[e._v("关 闭")])],1)],1),e._v(" "),a("el-dialog",{attrs:{title:e.stageTitle,visible:e.dialogVisibleStage,width:"65%","before-close":e.handleCloseStage},on:{"update:visible":function(t){e.dialogVisibleStage=t}}},[a("EnglishStage",{attrs:{stageData:e.stageData},on:{refresh:function(t){e.refresh()}}}),e._v(" "),a("span",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{attrs:{type:"primary"},on:{click:function(t){e.dialogVisibleStage=!1}}},[e._v("关 闭")])],1)],1)],1)},staticRenderFns:[]};var l=a("VU/8")(o,n,!1,function(e){a("TjJL")},"data-v-40f7b884",null);t.default=l.exports}});